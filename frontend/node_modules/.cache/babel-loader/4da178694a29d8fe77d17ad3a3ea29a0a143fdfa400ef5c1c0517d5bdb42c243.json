{"ast":null,"code":"var _jsxFileName = \"D:\\\\Desktop\\\\FeedBack\\\\frontend\\\\src\\\\components\\\\Feedback\\\\FeedbackForm.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { ClipLoader } from 'react-spinners';\nimport './FeedbackForm.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FeedbackForm = () => {\n  _s();\n  const [faculties, setFaculties] = useState([]);\n  const [feedback, setFeedback] = useState({});\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [activeFaculty, setActiveFaculty] = useState(null); // Track the active faculty tab\n  const navigate = useNavigate();\n  const questions = [\"How well does the faculty explain the concepts?\", \"How approachable is the faculty for doubts?\", \"How effective is the faculty's teaching method?\", \"How well does the faculty manage time during lectures?\", \"How engaging are the faculty's lectures?\", \"How clear are the faculty's explanations?\", \"How well does the faculty encourage student participation?\", \"How organized is the faculty in delivering the course content?\", \"How well does the faculty provide feedback on assignments?\", \"How knowledgeable is the faculty about the subject?\"];\n  useEffect(() => {\n    const fetchFaculties = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        const response = await axios.get('http://localhost:5000/api/feedback/faculties', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setFaculties(response.data);\n\n        // Initialize feedback state for each faculty\n        const initialFeedback = {};\n        response.data.forEach(faculty => {\n          initialFeedback[faculty._id] = Array(10).fill(0); // 10 questions\n        });\n        setFeedback(initialFeedback);\n\n        // Set the first faculty as active by default\n        if (response.data.length > 0) {\n          setActiveFaculty(response.data[0]._id);\n        }\n      } catch (err) {\n        setError('Failed to load faculties. Please try again.');\n      }\n    };\n    fetchFaculties();\n  }, []);\n  const handleQuestionChange = (facultyId, questionIndex, value) => {\n    setFeedback(prev => {\n      const updated = {\n        ...prev\n      };\n      updated[facultyId][questionIndex] = parseInt(value);\n      return updated;\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n    try {\n      const token = localStorage.getItem('token');\n      await axios.post('http://localhost:5000/api/feedback/submit', {\n        feedback\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      navigate('/feedback-submitted');\n    } catch (err) {\n      setError('Failed to submit feedback. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"feedback-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Faculty Feedback Form\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 23\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tabs\",\n      children: faculties.map(faculty => /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `tab-button ${activeFaculty === faculty._id ? 'active' : ''}`,\n        onClick: () => setActiveFaculty(faculty._id),\n        children: faculty.facultyName\n      }, faculty._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [faculties.map(faculty => activeFaculty === faculty._id ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"faculty-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: faculty.facultyName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 29\n        }, this), questions.map((question, i) => {\n          var _feedback$faculty$_id;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"question\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: question\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              min: \"1\",\n              max: \"5\",\n              value: ((_feedback$faculty$_id = feedback[faculty._id]) === null || _feedback$faculty$_id === void 0 ? void 0 : _feedback$faculty$_id[i]) || 0,\n              onChange: e => handleQuestionChange(faculty._id, i, e.target.value),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 37\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 33\n          }, this);\n        })]\n      }, faculty._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 25\n      }, this) : null), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: loading,\n        children: loading ? /*#__PURE__*/_jsxDEV(ClipLoader, {\n          size: 20,\n          color: \"#fff\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 32\n        }, this) : 'Submit Feedback'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 9\n  }, this);\n};\n_s(FeedbackForm, \"xZtxOk9Ox25Fw6/gUMa7IyjysT8=\", false, function () {\n  return [useNavigate];\n});\n_c = FeedbackForm;\nexport default FeedbackForm;\nvar _c;\n$RefreshReg$(_c, \"FeedbackForm\");","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","ClipLoader","jsxDEV","_jsxDEV","FeedbackForm","_s","faculties","setFaculties","feedback","setFeedback","loading","setLoading","error","setError","activeFaculty","setActiveFaculty","navigate","questions","fetchFaculties","token","localStorage","getItem","response","get","headers","Authorization","data","initialFeedback","forEach","faculty","_id","Array","fill","length","err","handleQuestionChange","facultyId","questionIndex","value","prev","updated","parseInt","handleSubmit","e","preventDefault","post","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","onClick","facultyName","onSubmit","question","i","_feedback$faculty$_id","type","min","max","onChange","target","required","disabled","size","color","_c","$RefreshReg$"],"sources":["D:/Desktop/FeedBack/frontend/src/components/Feedback/FeedbackForm.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { ClipLoader } from 'react-spinners';\r\nimport './FeedbackForm.css';\r\n\r\nconst FeedbackForm = () => {\r\n    const [faculties, setFaculties] = useState([]);\r\n    const [feedback, setFeedback] = useState({});\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const [activeFaculty, setActiveFaculty] = useState(null); // Track the active faculty tab\r\n    const navigate = useNavigate();\r\n\r\n    const questions = [\r\n        \"How well does the faculty explain the concepts?\",\r\n        \"How approachable is the faculty for doubts?\",\r\n        \"How effective is the faculty's teaching method?\",\r\n        \"How well does the faculty manage time during lectures?\",\r\n        \"How engaging are the faculty's lectures?\",\r\n        \"How clear are the faculty's explanations?\",\r\n        \"How well does the faculty encourage student participation?\",\r\n        \"How organized is the faculty in delivering the course content?\",\r\n        \"How well does the faculty provide feedback on assignments?\",\r\n        \"How knowledgeable is the faculty about the subject?\",\r\n    ];\r\n\r\n    useEffect(() => {\r\n        const fetchFaculties = async () => {\r\n            try {\r\n                const token = localStorage.getItem('token');\r\n                const response = await axios.get('http://localhost:5000/api/feedback/faculties', {\r\n                    headers: { Authorization: `Bearer ${token}` },\r\n                });\r\n                setFaculties(response.data);\r\n\r\n                // Initialize feedback state for each faculty\r\n                const initialFeedback = {};\r\n                response.data.forEach((faculty) => {\r\n                    initialFeedback[faculty._id] = Array(10).fill(0); // 10 questions\r\n                });\r\n                setFeedback(initialFeedback);\r\n\r\n                // Set the first faculty as active by default\r\n                if (response.data.length > 0) {\r\n                    setActiveFaculty(response.data[0]._id);\r\n                }\r\n            } catch (err) {\r\n                setError('Failed to load faculties. Please try again.');\r\n            }\r\n        };\r\n\r\n        fetchFaculties();\r\n    }, []);\r\n\r\n    const handleQuestionChange = (facultyId, questionIndex, value) => {\r\n        setFeedback((prev) => {\r\n            const updated = { ...prev };\r\n            updated[facultyId][questionIndex] = parseInt(value);\r\n            return updated;\r\n        });\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        setError('');\r\n\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            await axios.post(\r\n                'http://localhost:5000/api/feedback/submit',\r\n                { feedback },\r\n                { headers: { Authorization: `Bearer ${token}` } }\r\n            );\r\n            navigate('/feedback-submitted');\r\n        } catch (err) {\r\n            setError('Failed to submit feedback. Please try again.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"feedback-container\">\r\n            <h2>Faculty Feedback Form</h2>\r\n            {error && <p className=\"error\">{error}</p>}\r\n            <div className=\"tabs\">\r\n                {faculties.map((faculty) => (\r\n                    <button\r\n                        key={faculty._id}\r\n                        className={`tab-button ${activeFaculty === faculty._id ? 'active' : ''}`}\r\n                        onClick={() => setActiveFaculty(faculty._id)}\r\n                    >\r\n                        {faculty.facultyName}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n            <form onSubmit={handleSubmit}>\r\n                {faculties.map((faculty) =>\r\n                    activeFaculty === faculty._id ? (\r\n                        <div key={faculty._id} className=\"faculty-panel\">\r\n                            <h3>{faculty.facultyName}</h3>\r\n                            {questions.map((question, i) => (\r\n                                <div key={i} className=\"question\">\r\n                                    <label>{question}</label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        min=\"1\"\r\n                                        max=\"5\"\r\n                                        value={feedback[faculty._id]?.[i] || 0}\r\n                                        onChange={(e) => handleQuestionChange(faculty._id, i, e.target.value)}\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    ) : null\r\n                )}\r\n                <button type=\"submit\" disabled={loading}>\r\n                    {loading ? <ClipLoader size={20} color=\"#fff\" /> : 'Submit Feedback'}\r\n                </button>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default FeedbackForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}